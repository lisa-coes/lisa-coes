---
author: LISA
banner: img/banners/blog-3.png
categories:
- componentes
date: "2021-11-03T11:50:46+02:00"
description:
tags:
- componentes
- ciencia abierta
- reproducibilidad
- c√≥digo
title: An√°lisis reproducibles
---

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

# Gu√≠a para los an√°lisis reproducibles  <i class="ai ai-open-materials ai-1.5x" style="color:pink"></i>

¬øCu√°ntas veces nos hemos enfrentado a un trabajo publicado que no comparte sus materiales, y que por tanto, es imposible acceder a los procedimientos que dieron luces a sus resultados? En este contexto, la **reproducibilidad** entendida como la posibilidad de **regenerar** de manera independiente los resultados usando los materiales originales de una investigaci√≥n publicada. _¬øC√≥mo organizamos un proyecto con an√°lisis reproducibles?_ _¬øQu√© herramientas puedo utilizar?_ _¬øC√≥mo puedo compartir mis materiales?_ En este blog daremos algunas orientaciones generales respecto a c√≥mo avanzar en esta direcci√≥n.

<br>
<div style="background-color: #ffff ; padding: 8px; border: 2px solid #ec8686;">
- [¬øCu√°les son los pasos a seguir?](#pasos)
- [Paso 1: Estructura del proyecto](#paso1)
- [Paso 2: Pr√°cticas de c√≥digo](#paso2)
- [Paso 3: Uso de documentos din√°micos](#paso3)
- [Paso 4: Control de versiones](#paso4)
</div>

# ¬øCu√°les son los pasos a seguir? {#pasos}

```{r echo=FALSE, out.width='75%', fig.align='center'}
 knitr::include_graphics("../input/lisa-reproducibilidad.gif")
```

Un proyecto reproducible no se reduce solamente a un buen c√≥digo, sino que considera la vinculaci√≥n entre los distintos elementos del proyecto que nos permitan **regenerar** los resultados de un estudio original. Por lo tanto, hemos organizado esta gu√≠a en cuatro pasos:

`1. Estructura del proyecto`: la organizaci√≥n de los elementos de un proyecto es clave para lograr un est√°ndar m√≠nimo de reproducibilidad. Esto implica que tanto los materiales iniciales como los datos y rutinas de c√≥digo deben estar correctamente vinculados para obtener los resultados.  

`2. Pr√°cticas de c√≥digo`: la calidad de una hoja de c√≥digo puede ser clave en lograr la regeneraci√≥n de resultados. Por este motivo, cuestiones como los comentarios, indentaci√≥n y organizaci√≥n del c√≥digo son necesarias para un proyecto reproducible.

`3. Documentos din√°micos`: la combinaci√≥n de escritura en texto plano con el c√≥digo de an√°lisis hace de los documentos din√°micos una herramienta clave para la reproducibilidad dado que nos permiten generar reportes autocontenidos.

`4. Control de versiones`: saber _qu√©_, _qui√©n_ y _cu√°ndo_ se ha realizado un cambio en nuestro proyecto, adem√°s del uso de repositorios p√∫blicos contribuye a realizar el seguimiento de un proyecto y as√≠ tambi√©n identificar problemas para reproducir los resultados como tambi√©n para colaborar de manera eficiente.

# Paso 1: Estructura del proyecto {#paso1}

La forma en que est√°n organizadas las partes de un proyecto es fundamental para cumplir a cabalidad con el objetivo de hacerlo reproducible. Esta organizaci√≥n se puede sintetizar como un esquema que involucra tres elementos: `(1) Input`, `(2) Procesamiento` y `(3) Output`.

Este esquema se basa en una versi√≥n dell Protocolo IPO (Input-Procesamiento-Output) que se propone abordar brevemente todo lo referente a los `Datos`, `M√©todos` y `Resultados`. 


üó∏ Si deseas saber m√°s sobre el **Protocolo IPO** puedes hacer click aqu√≠:

<a class = "btn btn-template-main" href="../ipo-protocol/index.html" target="_blank">Protocolo IPO</a>


## Carpeta Ra√≠z

Para la organizaci√≥n de un proyecto, debemos pensar en una **estructura digital** de carpetas y subcarpetas. La carpeta ra√≠z es donde se alberga toda la informaci√≥n de referencia para el proyecto, la cual tiene por objetivo:

- **Documentar**: expone ordenadamente el contenido del proyecto de manera jer√°rquica (carpetas y subcarpetas).

- **Orientar**:  instruye al usuario para una correcta ejecuci√≥n de rutinas de c√≥digo que permita regenerar los resultados de la investigaci√≥n.

Estas instrucciones pueden ir incluidas en un archivo `README` organizado de la siguiente manera:
</div>

```{r echo=FALSE, out.width='100%', fig.align='center'}
 knitr::include_graphics("../input/estructura.png")  
```

üó∏ Para mayores detalles respecto al contenido y estructura de un proyecto reproducible, puedes hacer click aqu√≠:

<a class = "btn btn-template-main" href="https://lisa-coes.github.io/lisa-book/herramientas-para-los-an%C3%A1lisis-reproducibles.html#estructura-del-proyecto" target="_blank">Estructura de un proyecto</a>


### <i class="fas fa-database" ></i> `Input (I)`

Si bien los protocolos var√≠an de acuerdo a c√≥mo se organizan los datos dentro de la carpeta ra√≠z (i.e. en qu√© carpeta se alojan), algo que suele ser com√∫n entre los protocolos es la diferenciaci√≥n entre los datos **originales** o "brutos" (_raw data_) y los datos **procesados**. El albergar ambas versiones permite identificar los cambios generados a trav√©s del procesamiento.

Para toda fuente de datos original, se debe proveer la siguiente informaci√≥n:

- Citaci√≥n bibliogr√°fica en un formato est√°ndar
- Fecha de creaci√≥n de la base de datos
- Descripci√≥n respecto a c√≥mo se puede acceder a una copia de la base de datos
- Libro de c√≥digos de todas las variables de la base de datos.

üó∏ Para mayor detalle sobre la secci√≥n de datos, puedes hacer click aqu√≠:

<a class = "btn btn-template-main" href="https://lisa-coes.github.io/lisa-book/herramientas-para-los-an%C3%A1lisis-reproducibles.html#datos" target="_blank">Datos</a>

### üìù `Procesamiento (P)`

Con `Pocesamiento` nos referimos a todos los procedimientos del proyecto relacionados con la **(1) preparaci√≥n** y **(2) an√°lisis** de datos.

#### **`(1) Preparaci√≥n`**

La preparaci√≥n de los datos cumple una funci√≥n clave para el desarrollo de un art√≠culo: la de generar los datos que emplearemos en an√°lisis del estudio. Considerando esto, el objetivo final de este documento es generar una base de datos procesada, que contenga solamente los datos importantes para analizar.

Sugerimos seguir el siguiente flujo para realizar la preparaci√≥n de los datos:

```{r echo=FALSE}
 pacman::p_load(dplyr, kableExtra,sjlabelled, readxl)
 text_tbl <- data.frame(
  Procedimientos = c("1. Descriptivo inicial", "2. Recodificaci√≥n",
                     "3. Etiquetado", "4. Descriptivo final",
                     "5. Otros ajustes"),
  Descripci√≥n = c(
    "Calcular una tabla de frecuencias o de medidas de tendencia central y dispersi√≥n para conocer el estado de la variable previo a cualquier modificaci√≥n",
    "Recodificaci√≥n de los datos perdidos y otro tipo de valores a modificar (e.g. errores de tipeo)",
    "Una base bien documentada trae etiquetas predeterminadas que hacen alusi√≥n a las preguntas del cuestionario",
    "Revisar de nuevo las frecuencias o las medidas de tendencia central de las variables, para diagnosticar que no hemos cometido errores en el procesamiento",
    "Efectuar toda modificaci√≥n espec√≠fica y relevante para la forma que analizaremos los datos"
   )
 )

 kableExtra::kbl(text_tbl,full_width = T, linesep = "", escape = FALSE) %>%
  kable_styling(
    full_width = F,
    position = "center",
    font_size = 14,
    bootstrap_options=c("striped", "bordered", "condensed", "responsive")) %>%
 column_spec(column = 1,width = "5cm")
```
El seguir este flujo de manera sistem√°tica facilitar√° la lectura tanto para terceros, como para nosotros mismos en el futuro.

#### **`(2) An√°lisis`**
*
Una vez contamos con nuestra **base de datos procesada** podemos analizar los datos. En el documento de an√°lisis de datos se procede a elaborar todas las tablas, gr√°ficos y pruebas estad√≠sticas que vayan a ser incluidas en el art√≠culo final. En t√©rminos generales las secciones son

1. An√°lisis descriptivos univariados de los datos.
2. An√°lisis bivariado de los datos.
3. An√°lisis multivariado.

#### **Documentaci√≥n**

Para lograr una correcta ejecuci√≥n de los documentos de preparaci√≥n y an√°lisis es clave tener correctamente explicado c√≥mo utilizarlos y c√≥mo se vinculan entre ellos. Para esto, sugerimos que documento `README` incluya las siguientes indicaciones:

1. **Ejecuci√≥n de la preparaci√≥n**: Precisar la ubicaci√≥n de la o las fuentes de datos originales.

2. **Cierre de la preparaci√≥n**: Precisar la ruta donde se deben almacenar la base de datos procesada.

3. **Ejecuci√≥n de an√°lisis**: Precisar el origen de la base de datos procesada.

4. **Archivos del an√°lisis de datos**: Precisar ruta de almacenamiento y nombre. 


üó∏  M√°s informaci√≥n sobre la secci√≥n de m√©todos, puedes hacer click aqu√≠:

<a class = "btn btn-template-main" href="https://lisa-coes.github.io/lisa-book/herramientas-para-los-an%C3%A1lisis-reproducibles.html#m%C3%A9todos" target="_blank">Preparaci√≥n y an√°lisis </a>

### üìä `Output (O)`

Con `Output`, nos referimos a todo elemento obtenido del an√°lisis de datos. Habitualmente toman la forma de figuras, gr√°ficos o tablas. Es habitual que los protocolos sugieran que estos archivos se almacenen en una subcarpeta exclusiva para ello. Por este motivo, sugerimos se sigan las siguientes indicaciones:

üî¥  Para **im√°genes**, sugerimos usar nombres breves e incorporar numeraci√≥n. Por ejemplo "figura01.png", siguiendo el orden de aparici√≥n en la publicaci√≥n.

üî¥ Para **tablas**, sugerimos emplear nombres cortos e incorporar numeraci√≥n. Por ejemplo, "tabla01.xls", seg√∫n el orden de aparici√≥n en la publicaci√≥n.

## Paso 2: Pr√°cticas de c√≥digo {#paso2}

La escritura de un c√≥digo de preparaci√≥n o an√°lisis requiere adoptar est√°ndares m√≠nimos, entre otras cosas, para facilitar la comprensi√≥n y ejecuci√≥n de una rutina de c√≥digo por **otros usuarios** que busquen regenerar nuestros resultados.

La figura a continuaci√≥n muestra algunas buenas pr√°cticas de c√≥digo que contribuyen a hacer el trabajo m√°s transparente, y son aplicables a lenguajes de programaci√≥n:

```{r echo=FALSE, out.width='100%', fig.align='center'}
 knitr::include_graphics("../input/practicas.png")
```

## Paso 3: Uso de documentos din√°micos {#paso3}

Los documentos din√°micos son una herramienta que incorpora lo mejor de dos mundos: documentos en texto plano y c√≥digo de an√°lisis.

üî¥ Por un lado, trabajar con `texto plano` implica independencia de cualquier software comercial o plataformas espec√≠ficas. Adicionalmente, un documento din√°mico permite centrarnos en el contenido y menos en el formato, dado que existen distintas opciones para ello (p.ej. _.pdf_ o _.html_).

üî¥ Finalmente, al incorporar c√≥digo de an√°lisis es posible generar documentos **autocontenidos**, es decir, no es necesario recurrir a im√°genes o tablas externas, sino que es posible generarlas en el mismo documento.

Por ejemplo, este documento est√° escrito en `R Markdown`, lo que nos permite demostrar c√≥mo combinar c√≥digo en `R` con texto plano.

<div class = "row">

<div class = "col-md-4">

As√≠ se ve el `c√≥digo` en nuestro documento:

```{r eval=FALSE}
 library(ggplot2)

 ggplot(mtcars, aes(x=mpg)) +
  geom_histogram(fill="skyblue",
                 alpha=0.5) +
  theme_minimal()

```
</div>

<div class = "col-md-8">

Luego, el c√≥digo se ejecuta y obtenemos el siguiente gr√°fico:

```{r echo=FALSE, message=FALSE, warning=FALSE, ,fig.align='center', fig.width=5, fig.height=2}
library(ggplot2)
ggplot(mtcars, aes(x=mpg)) +
  geom_histogram(fill="skyblue", alpha=0.5) +
  theme_minimal()
```

</div>

Usar documentos din√°micos escritos en `texto plano` abre un abanico de posibilidades cuando buscamos avanzar hacia proyectos con an√°lisis reproducibles. En este sentido, nos gustar√≠a destacar tres opciones:

```{r echo=FALSE, out.width='75%', fig.align='center'}
 knitr::include_graphics("../input/docs-dynamic.gif")
```

üó∏ Si deseas saber m√°s sobre c√≥mo funcionan los documentos din√°micos, puedes hacer click aqu√≠:

<a class = "btn btn-template-main" href="https://lisa-coes.github.io/lisa-book/herramientas-para-los-an%C3%A1lisis-reproducibles.html#texto-plano-y-documentos-din%C3%A1micos" target="_blank">Documentos din√°micos</a>

## Paso 4: Control de versiones {#paso4}

A modo global, el **control de versiones** nos permite rastrear los cambios en un documento o conjunto de archivos, es decir, saber _cu√°les/qu√©_,   _qui√©n_ y _cu√°ndo_  se han realizado cambios.

Al trabajar colaborativamente existen diferentes (y poco eficientes) maneras de controlar versiones. Por ejemplo:

  ‚ùå Fechas: `codigo_2021-03-01.R` ‚Üí `codigo_2021-05-02.R`

  ‚ùå Numeraci√≥n: `analisis_v02.do` ‚Üí  `analisis_v05.do`   

No obstante, hoy en d√≠a existen sistemas de control de versiones especializados para el trabajo de programaci√≥n. Al respecto, nuestra sugerencia es emplear versionamiento basado en <i class="fab fa-git-square"></i>
, pero _¬øqu√© es Git?_ Te lo explicamos a continuaci√≥n.        

### Git <i class="fab fa-git-alt"></i> y GitHub <i class="fab fa-github"></i>

[**Git**](https://es.wikipedia.org/wiki/Git){target="_blank"} es un sistema de control de versiones de c√≥digo abierto, tiene por objetivo hacer m√°s eficiente el flujo de trabajo para proyectos de desarrollo de software. Algunas de sus principales caracter√≠sticas son:

‚≠ï Permite registrar (_snapshot_) la versi√≥n de una carpeta completa y su contenido  

‚≠ï Registra _qu√©_, _qui√©n_ y _cu√°ndo_ se realizaron cambios

‚≠ï Uso de repositorios (_repos_) locales (computadora) o remotos (_online_)

A la par existe [**GitHub**](https://github.com/){target="_blank"}, el cual es una plataforma de desarrollo colaborativo para hospedar proyectos que utilizan control de versiones basado en **Git**. Una de sus principales caracter√≠sticas es el uso de repositorios locales y remotos. La siguiente figura muestra un ejemplo:

```{r echo=FALSE, out.width='100%', fig.align='center'}
 knitr::include_graphics("../input/github-colab.png")
```
Recomendamos el uso de Git y Github c√≥mo flujo de trabajo para aquellos cient√≠ficos sociales que trabajan con datos cuantitativos, especialmente cuando son grandes equipos de investigaci√≥n o son proyectos con varias colaboraciones.

üó∏ Si deseas conocer m√°s sobre Git y GitHub te invitamos a revisar la sesi√≥n del curso "Ciencia Social Abierta":

<a class = "btn btn-template-main" href="https://cienciasocialabierta.netlify.app/class/08-class/" target="_blank">Control de versiones/Git</a>


# En s√≠ntesis

üî¥ Si deseas revisar m√°s detalles de c√≥mo elaborar un proyecto reproducible, en el siguiente video se detalla el paso a paso para ello:

<div style="position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 48px; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
 border-radius: 8px; will-change: transform;">
  <iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;"
    src="https:&#x2F;&#x2F;www.canva.com&#x2F;design&#x2F;DAEtY9Ngapo&#x2F;watch?embed">
  </iframe>
</div>
<a href="https:&#x2F;&#x2F;www.canva.com&#x2F;design&#x2F;DAEtY9Ngapo&#x2F;watch?utm_content=DAEtY9Ngapo&amp;utm_campaign=designshare&amp;utm_medium=embeds&amp;utm_source=link" target="_blank" rel="noopener"> </a>


## ¬øQuieres comentar o tienes alguna duda?

Puedes dejar tus comentarios y dudas sobre c√≥mo generar un proyecto reproducible. De todas formas puedes [contactarnos](/contact/)

<div id="disqus_thread"></div>
